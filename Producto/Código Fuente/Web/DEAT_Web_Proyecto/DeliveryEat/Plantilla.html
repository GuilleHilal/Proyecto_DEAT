<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    
    <title> DeliverEat </title>
    <link rel="icon" href="Content/favicon.ico">
  
    <!-- Bootstrap core CSS -->
    <link href="https://fonts.googleapis.com/css?family=Rancho" rel="stylesheet">
    <link href="content/bootstrap.min.css" rel="stylesheet" />
    <!-- Custom styles for this template -->
    <link href="form-validation.css" rel="stylesheet" />
    <style type="text/css">
        body {
            margin: 0;
            padding: 0;
        }


        #h1 {
            font-size: 70px;
            font-weight: 300;
            color: white;
            float: left;
            padding-top: 30px;
            font-family: 'Rancho', cursive;
        }

        #barra {
            width: 100%;
            height: 70px;
            background-color: midnightblue;
        }

        img {
            height: 100px;
            width: 100px;
            margin-top: 10px;
            margin-left: 10px;
        }

        div {
            text-align: left;
        }

        .carrito {
            height: 40px;
            width: 40px;
            margin-left: 0px;
        }
    </style>
</head>

<body class="bg-light" ng-app="app">
    <div class="container" ng-controller="compraController">
        <div class="py-5 text-center" ng-show="!confirmar">
            
                <div id="barra">

                    <img src="Content/d-single-letter-circle-chat-brand_icon-icons.com_59299.png" align="left" style="margin-top:25px" alt="" /><h1 id="h1">eliverEat</h1>

                </div>
                <div id="barra" style="margin-bottom: 30px">
                </div>
            
            <div class="row">
                <div class="col-md-4 order-md-2 mb-1">

                    <h4 class="d-flex justify-content-between align-items-center mb-3">


                        <img src="Content/107831.png" alt="" class="carrito" />

                        <span class="badge badge-secondary badge-pill">{{carrito.length}}</span>


                    </h4>

                    <ul class="list-group mb-3">
                        <li class="list-group-item d-flex justify-content-between lh-condensed" ng-repeat="producto in carrito">
                            <div>
                                <h6 class="my-0">{{producto.nombre}}</h6>
                                <small class="text-muted">{{producto.descripcion}}</small>
                            </div>
                            <span class="text-muted">{{producto.precio | currency}}</span>
                        </li>

                        <li class="list-group-item d-flex justify-content-between">
                            <span>Total (ARS)</span>
                            <strong>{{valorTotal | currency}}</strong>
                        </li>
                    </ul>

                </div>
                <div class="col-md-8 order-md-1">
                    <h4 class="mb-3">Facturación</h4>
                    <form class="needs-validation" id="myForm" novalidate>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="firstName">Nombre</label>
                                <input type="text" class="form-control soloTexto" id="firstName" placeholder="" value="" ng-model="compra.nombre" required>
                                <div class="invalid-feedback">
                                    Se requiere el nombre.
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="lastName">Apellido</label>
                                <input type="text" class="form-control soloTexto" id="lastName" placeholder="" ng-model="compra.apellido" required>
                                <div class="invalid-feedback">
                                    Se requiere el apellido.
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="email">Email <span class="text-muted">(Opcional)</span></label>
                            <input type="email" class="form-control" id="email" placeholder="vos@ejemplo.com" ng-model="compra.email">
                            <div class="invalid-feedback">
                                Por favor, ingrese un email valido.
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="neighbour">Barrio</label>
                            <input type="text" class="form-control " id="neighbour" ng-model="compra.barrio" required />
                            <div class="invalid-feedback">
                                Por favor, ingrese el barrio.
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-8 mb-3">
                                <label for="address">Dirección</label>
                                <input type="text" class="form-control" id="address" placeholder="" ng-model="compra.direccion" required>
                                <div class="invalid-feedback">
                                    Por favor, ingrese su calle.
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="number">Número</label>
                                <input type="text" class="form-control soloNumero" id="number" ng-model="compra.numero" number required>
                                <div class="invalid-feedback">
                                    Por favor, ingrese su número de dirección.
                                </div>

                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="number">Depto<small class="text-muted">(Opcional)</small></label>
                                <input type="text" class="form-control" id="depto" ng-model="compra.depto">


                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="number">Piso<small class="text-muted">(Opcional)</small></label>
                                <input type="text" class="form-control" id="number" ng-model="compra.piso">


                            </div>
                        </div>
                        <hr class="mb-4">
                        <h4 class="mb-3">Momento de Entrega</h4>
                        <div class="d-block my-3">
                            <div class="custom-control custom-radio">
                                <input class="custom-control-input" name="deliveryMoment" type="radio" id="fastest" ng-value="1" ng-model="entrega.idTipoEntrega" checked="checked" required />
                                <label class="custom-control-label" for="fastest">Lo antes posible</label>
                            </div>
                            <div class="custom-control custom-radio">
                                <input class="custom-control-input" name="deliveryMoment" type="radio" ng-value="2" id="time" ng-model="entrega.idTipoEntrega" required />
                                <label class="custom-control-label" for="time">Otro momento</label>
                            </div>
                            <div class="row" ng-show="entrega.idTipoEntrega == 2">
                                <div class="col-md-2">
                                    <label class="mt-3" for="appt-time">Tiempo:</label>
                                </div>
                                <div class="col-md-3 mt-3">
                                    <input class="btn" type="time" id="inputTime" name="usr_time">
                                    <!--<input class="form-control" type="text" name="name" id="tiempo" onchange="validateHhMm(this)" ng-model="entrega.horaEntrega" />-->
                                </div>




                            </div>
                        </div>



                        <hr class="mb-4">
                        <h4 class="mb-3">Forma de Pago</h4>
                        <div class="d-block my-3">
                            <div class="custom-control custom-radio">
                                <input id="credit" name="paymentMethod" type="radio" class="custom-control-input" ng-value="2" ng-model="pago.idTipoPago" checked="checked" required>
                                <label class="custom-control-label" for="credit">Tarjeta de Crédito</label><small class="text-muted ml-2">VISA únicamente</small>
                            </div>
                            <div class="custom-control custom-radio">
                                <input id="efectivo" name="paymentMethod" type="radio" class="custom-control-input" ng-value="1" ng-model="pago.idTipoPago" required>
                                <label class="custom-control-label" for="efectivo">Efectivo</label>
                            </div>

                        </div>
                        <div class="row" ng-show="pago.idTipoPago == 1">
                            <div class="col-md-4 mb-3">
                                <label for="monto">Monto</label>
                                <input type="text" class="form-control soloNumero" id="monto" ng-model="pago.monto" placeholder="" required>
                                <div class="invalid-feedback">
                                    Por favor, ingrese una cantidad valida.
                                </div>
                            </div>

                        </div>
                        <div class="row" ng-show="pago.idTipoPago == 2">
                            <div class="col-md-6 mb-3">
                                <label for="cc-name">Nombre en tarjeta</label>
                                <input type="text" class="form-control soloTexto" id="cc-name" placeholder="" required>
                                <small class="text-muted">Nombre completo</small>
                                <div class="invalid-feedback">
                                    Se requiere el nombre en la tarjeta
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="cc-number">Numero Tarjeta de Crédito</label>
                                <input type="text" class="form-control" id="cc-number" placeholder="" required>
                                <div class="invalid-feedback">
                                    Se requiere numero de tarjeta
                                </div>
                            </div>
                        </div>
                        <div class="row" ng-show="pago.idTipoPago == 2">
                            <div class="col-md-3 mb-3">
                                <label for="cc-expiration">Expiración </label>
                                <input type="text" class="form-control soloNumero" id="cc-expiration" placeholder="" required>
                                <small class="text-muted">(MM/AA)</small>
                                <div class="invalid-feedback">
                                    Se requiere fecha de expiración
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <label for="cc-cvv">CVV</label>
                                <input type="text" class="form-control soloNumero" id="cc-cvv" placeholder="" required>
                                <div class="invalid-feedback">
                                    Se requiere numero de seguridad
                                </div>
                            </div>
                        </div>
                        <hr class="mb-4">
                        <div class="row">
                            <div class="col-md-6">
                                <button class="btn btn-primary btn-lg btn-block" type="submit" ng-click="agregar()">Confirmar Pedido</button>
                            </div>

                    </form>

                    <div class="col-md-6">
                        <button class="btn btn-warning btn-lg btn-block" type="button" ng-click="cancelar()">Cancelar Pedido</button>
                    </div>
                </div>
            </div>
        </div>

        <footer class="my-5 pt-5 text-muted text-center text-small">
            <p class="mb-1">&copy; 2017-2018 DeliverEat</p>
            <ul class="list-inline">
                <li class="list-inline-item"><a href="#">Privacy</a></li>
                <li class="list-inline-item"><a href="#">Terms</a></li>
                <li class="list-inline-item"><a href="#">Support</a></li>
            </ul>
        </footer>
    </div>
    <div class=" container" ng-show="confirmar">
        <div class="row">
            <div class="col">
                <div class="alert alert-success" style="margin-top:250px; height:100px; width:1000px" ng-click="cancelar()" role="alert">
                    <h2 class="justify-content-between align-items-center" style="text-align:center">Su Pedido se ha realizado con exito!</h2>
                    <h3 class="justify-content-between align-items-center" style="text-align:center">Su vuelto es de ${{pago.monto - valorTotal}}</h3>
                </div>
            </div>

        </div>
    </div>
    </div>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!--<script>window.jQuery || document.write('<script src="../../../../assets/js/vendor/jquery-slim.min.js"></script>')</script>-->

    <script src="scripts/jquery-3.3.1.min.js"></script>+
    <script src="scripts/angular.min.js"></script>
    <script src="js/app.js"></script>
    <script src="scripts/bootstrap.min.js"></script>

    <script>
        // Example starter JavaScript for disabling form submissions if there are invalid fields
        (function () {
            'use strict';

            window.addEventListener('load', function () {
                // Fetch all the forms we want to apply custom Bootstrap validation styles to
                var forms = document.getElementsByClassName('needs-validation');

                // Loop over them and prevent submission
                var validation = Array.prototype.filter.call(forms, function (form) {
                    form.addEventListener('submit', function (event) {
                        if (form.checkValidity() === false) {
                            event.preventDefault();
                            event.stopPropagation();
                        }
                        form.classList.add('was-validated');
                    }, false);
                });
            }, false);
        })();
    </script>
    <!-- <script>
        var checkbox = document.getElementById("fastest");

        checkbox.addEventListener('change', function () {
            if (this.checked) {
                var check2 = document.getElementById("deliveryMoment");
                check2.checked = false;
            } else {
                var check2 = document.getElementById("deliveryMoment");
                check2.checked = true;
            }
        });
    </script>-->
    <script>
        $(document).ready(function () {
            $("#time").on('change', function () {
                $('#fastest').change();

            })

            $('#fastest').attr('checked', '');


            var radio = document.getElementById("fastest");

            $('#fastest').on('change', function () {
                if (radio.checked) {

                    $('#input-tiempo').removeAttr('required');
                    $('#inputTime').val(null);
                }
                else {

                    $('#input-tiempo').attr('required', '');
                }
            });
            $('#efectivo').on('change', function () {
                if ($('#efectivo').checked) {
                    $('#monto').attr('required', '');


                }
                else {
                    $('#monto').removeAttr('required');
                    $('#monto').val('');
                }

            })
            $('#credit').on('change', function () {
                $('#efectivo').change();
            })


        });


    </script>
    <script type="text/javascript">
        $('.soloTexto').bind('keyup blur', function () {
            var node = $(this);
            node.val(node.val().replace(/[^a-zA-Z\s]/g, ''));
        }
        );
    </script>
    <script>
        $(document).ready(function () {
            //called when key is pressed in textbox
            $(".soloNumero").keypress(function (e) {

                if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {


                    return false;
                }
            });
        });
    </script>
    <script>
        $(document).ready(function () {
            $("#cc-number").attr('maxlength', '16');
            $("#cc-cvv").attr('maxlength', '3');
            $("#cc-number").keypress(function (e) {

                if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {
                    //display error message

                    return false;
                }
            });
        });
    </script>
    <script>
        $(document).ready(function () {
            var patternMes = new RegExp("^(0[1-9]|1[0-2])$");
            var patternAno = new RegExp("^(0[1-9]|1[0-2])\/(1[8-9]|[2-9][0-9])$");
            var lastInput = '';
            $('#cc-expiration').bind('keyup blur', function (e) {
                var nodo = $(this);
                if (e.which != 8) { 
                    if (nodo.val().length == 2) {

                        nodo.val(nodo.val() + "/");
                    }
                    if (nodo.val().length == 5) {
                        if (patternAno.test(nodo.val())) {
                       
                            nodo.attr('class', 'form-control border-success');

                        }
                        else {

                            alert("Ingrese una fecha de expiración correcta");
                            nodo.attr('class', 'form-control border-danger');
                            nodo.val("");
                        }
                    }
                }
                


           



            })

        })
    </script>
</body>

</html>
